<!--
 ************************************************************************
 *
 * TACoBell_IR_Dashboard
 * Copyright (C) 2014, David C. Merritt, david.c.merritt@siemens.com
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 * 
 ************************************************************************
 * 
 * The main html file for a Windows Sidebar gadget to display the GTAC 
 * EMEA TACoBell IR Dashboard in a minimal window.
 * 
 ************************************************************************
 * 
 * 03/01/2014  merritt  initial release
 * 05/01/2014  merritt  added copyright notice and delay launch option
 * 06/03/2014  merritt  added event listener to catch offline state
 * 
 ************************************************************************
-->
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=Unicode" />
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <script src="js/main.js" type="text/javascript"></script>
    </head>
    
 <script>
<!--
window.addEventListener("offline", function(e) 
    {
        document.getElementById("displayDelay").firstChild.nodeValue = "Offline";        
        document.getElementById("tacoFrame").src = "";
    }
)
window.addEventListener("online", function(e) {alert("online");})

if (navigator.onLine) 
{
    document.getElementById("displayDelay").firstChild.nodeValue = "Online";     
} 
else 
{
    document.getElementById("displayDelay").firstChild.nodeValue = "Offline";        
    document.getElementById("tacoFrame").src = "";
}
-->
</script>   
    
   <!-- 
    
    <script type="text/javascript">
        

(function () {
	var displayOnlineStatus = document.getElementById("displayDelay"),
		isOnline = function () 
        {
			displayOnlineStatus.innerHTML = "Online";
			displayOnlineStatus.className = "online";
		},
		isOffline = function () 
        {
			document.getElementById("displayDelay").firstChild.nodeValue = "Offline";        
            document.getElementById("tacoFrame").src = "";
		};
		
	if (window.addEventListener) {
        /*
            Works well in Firefox and Opera with the 
            Work Offline option in the File menu.
            Pulling the ethernet cable doesn't seem to trigger it.
            Later Google Chrome and Safari seem to trigger it well
        */
		window.addEventListener("online", isOnline, false);
		window.addEventListener("offline", isOffline, false);
	}
	else {
		/*
			Works in IE with the Work Offline option in the 
			File menu and pulling the ethernet cable
		*/
		document.body.ononline = isOnline;
		document.body.onoffline = isOffline;
	}
})();        
        
        
        
    </script>
 -->

 
    <body id="mainBody" onLoad="CheckLaunch();">
        <div id="displayDelay">
            Launching TACoBell...
        </div>
            <iframe id="tacoFrame" src="" scrolling="yes" border="0"></iframe>
    </body>
</html>
